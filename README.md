# Merch Shop - Backend Service

Это сервис для внутреннего магазина мерча в Avito, реализованный на Go. Сервис позволяет сотрудникам обмениваться монетками и приобретать мерч за монетки. Для авторизации используется JWT, при первой авторизации пользователь создаётся автоматически с 1000 монетами.

## Функциональность

- **Аутентификация/регистрация** через `/api/auth` (при первой авторизации создаётся пользователь с 1000 монет)
- **Получение информации** о балансе, инвентаре и истории транзакций через `/api/info`
- **Перевод монет** между сотрудниками через `/api/sendCoin`
- **Покупка мерча** через `/api/buy/{item}`

## Установка и запуск

### 1. Клонирование репозитория

```
git clone https://github.com/yourusername/merch-shop.git
cd merch-shop
```

### 2. Настройка переменных окружения
Создайте файл .env в корне проекта со следующим содержимым (при необходимости измените параметры):

```
DB_HOST=db
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=yourpassword
DB_NAME=merch_shop
PORT=8080
JWT_SECRET=yourpassword
```

### 3. Запуск с использованием Docker Compose
Соберите образы и запустите контейнеры:

```
make build
make up
```

Контейнер с приложением будет доступен по адресу: http://localhost:8080

### 4. Остановка контейнеров
```
make down
```

### 5. Просмотр логов
```
make logs
```

## Тестирование
Запустить все тесты можно командой:
```
go test -v ./...
```

Для интеграционных тестов:
```
go test -v ./integration/...
```